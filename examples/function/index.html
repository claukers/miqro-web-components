<!DOCTYPE html>
<html>
<body>
<my-root></my-root>
<script type="module">
  import {defineFunction, Component} from "./lib/index.js";

  defineFunction("label-fn", async function () {
    const [count, setCount] = this.useState(0);
    console.log("here");
    return {
      template: '<p data-on-click="{click}">click count {count}</p>{children}<p>end</p>',
      values: {
        count,
        click: () => {
          setCount(count + 1);
        }
      }
    }
  });

  customElements.define("my-root", class extends Component {
    constructor() {
      super();
      this.state.text = "text";
      setInterval(()=>{
        const random = Math.random() * 1000 * 100;
        this.setState({
          text: "asdklsja " + random
        });
      }, 1000);
    }

    render() {
      return "<!--{root.html}-->"
    }
  })

</script>
</body>
</html>
