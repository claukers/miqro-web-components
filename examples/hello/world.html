<html>
<body>
<my-root></my-root>
<script type="module">
  import {Component, setCache} from "./esm/index.js";

  class Root extends HTMLElement {
    constructor() {
      super();
      const app = document.createElement("my-app");
      this.appendChild(app);
      setTimeout(() => {
        app.setAttribute("id", "MyApp");
        app.setAttribute("data-name", "nonameasd");
      }, 1000);
    }
  }

  setCache({
    "blabla": "<p>{this.dataset.name}</p>"
  });

  class App extends Component {

    static get template() { return "blabla"; };

    static get observedAttributes() { return ['data-name']; }

    attributeChangedCallback(name, oldValue, newValue) {
      console.log(name);
      console.log(oldValue);
      console.log(newValue);
      this.refresh();
    }
  }

  customElements.define("my-app", App);
  customElements.define("my-root", Root);
</script>
</body>
</html>
