(()=>{var e={386:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;const n=r(794);class o extends HTMLElement{constructor(){super(),this.storeListeners=[],this.state=Object.create(null)}subscribe(e,t,r){(0,n.set)(this.state,t,r(e.getState())),this.storeListeners.push({path:t,store:e,selector:r,listener:e=>{this.setState((0,n.set)({...this.state},t,e))}})}subscribeAll(){for(const e of this.storeListeners)e.store.unSubscribe(e.listener),(0,n.set)(this.state,e.path,e.store.subscribe(e.selector,e.listener))}unSubscribeAll(){for(const e of this.storeListeners)e.store.unSubscribe(e.listener)}connectedCallback(){return this.templateChildren=this.templateChildren?this.templateChildren:(0,n.nodeList2Array)(this.childNodes),this.subscribeAll(),this.refresh()}disconnectedCallback(){return(0,n.disconnect)(this),this.unSubscribeAll()}render(){}didUpdate(e){return!0}setState(e,t){const r={...this.state};this.state={...this.state,...e},this.didUpdate(r)&&this.isConnected&&this.refresh(t)}refresh(e){if(this.isConnected)return(0,n.render)(this,this.constructor.hasOwnProperty("template")?`\x3c!--{${this.constructor.template}}--\x3e`:this.render(),{this:this,children:this.templateChildren?this.templateChildren:[]},e)}}t.Component=o},738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var n=r(386);Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return n.Component}})},234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disconnectedCallback=t.connectedCallback=t.constructorCallback=void 0;const n=r(794),o=r(746),s=r(814),a=r(495);t.constructorCallback=function(e,t,r,n){if(s.weakMapHas.call(i,e))throw new Error("createHookContext called twice on element");const c={lock:!1,shadowRoot:r||void 0===r?e.attachShadow(r&&"object"==typeof r?r:{mode:"closed"}):void 0,func:t,template:n,state:{},mountEffects:[],mountEffectCallbacks:[],effects:[],effectCallbacks:[],queryWatch:[],attributeWatch:[],contextCalls:[],templateValues:{},observer:new MutationObserver((function(){c.refresh()})),refresh:(t=!1)=>{if(c.lock)throw new Error("conditional this.use calls detected. function component locked!");return(0,a.flushEffectCallbacks)(c.effectCallbacks),c.attributeWatch.splice(0,c.attributeWatch.length),c.queryWatch.splice(0,c.queryWatch.length),(0,o.renderFunction)(e,t,c)},renderCallback:()=>{c.queryWatch.length>0&&c.effects.unshift((0,a.queryEffect)(c)),c.attributeWatch.length>0&&c.effects.unshift((0,a.attributeEffect)(e,c)),(0,a.flushEffects)(c.effects,c.effectCallbacks)}};s.weakMapSet.call(i,e,c)},t.connectedCallback=function(e){return c(e).refresh(!0)},t.disconnectedCallback=function(e){const t=c(e);return(0,a.flushEffectCallbacks)(t.effectCallbacks),(0,a.flushEffectCallbacks)(t.mountEffectCallbacks),(0,n.disconnect)(t.shadowRoot?t.shadowRoot:e)};const i=new WeakMap;function c(e){const t=s.weakMapGet.call(i,e);if(!t)throw new Error("getMeta no meta for element");return t}},196:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFunctionContext=void 0;const n=r(495);t.createFunctionContext=function(e,t,r,o){let s=!1;const a=[],i={element:e,shadowRoot:t.shadowRoot};function c(n,c){const u=c.bind(i);if(i[n])throw new Error("already bound");i[n]=function(...i){if(s)throw new Error(`cannot use ${n} after render!`);if(o.abortController.signal.aborted)throw new Error(`cannot use ${n} after render aborted!`);const c={call:n,name:`func-${n}-${a.length}`,firstRun:r};return a.push(c),u(e,c,t,o,...i)}}return c("useState",n.useState),c("useEffect",n.useEffect),c("useMountEffect",n.useMountEffect),c("useAs",n.useAs),c("useAttribute",n.useAttribute),c("useJSONAttribute",n.useJSONAttribute),c("useQuery",n.useQuery),c("useSubscription",n.useSubscription),{validateAndLock:function(){if(s)throw new Error("cannot use validateAndLock when locked!");s=!0;const e=a.splice(0,a.length);if(r)t.contextCalls=e;else{if(e.length!==t.contextCalls.length)throw t.lock=!0,new Error(`conditional this.use calls detected(1)! ${e.map((e=>e.name)).join(",")} vs ${t.contextCalls.map((e=>e.name)).join(",")}`);if(e.filter(((e,r)=>t.contextCalls[r].call!==e.call||t.contextCalls[r].name!==e.name)).length>0)throw t.lock=!0,new Error("conditional this.use calls detected(2)!");t.contextCalls=e}},this:i}}},329:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineFunction=void 0;const n=r(234);t.defineFunction=function(e,t,r,o){customElements.define(e,class extends HTMLElement{constructor(){super(),(0,n.constructorCallback)(this,t,r,o)}connectedCallback(){return(0,n.connectedCallback)(this)}disconnectedCallback(){return(0,n.disconnectedCallback)(this)}})}},746:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderFunction=void 0;const n=r(794),o=r(196),s=r(146),a=r(495);t.renderFunction=function(e,t,r){return(0,n.render)(r.shadowRoot?r.shadowRoot:e,function(e,t,r){return async function(a){if(a.abortController.signal.aborted)return;r.templateChildren=r.templateChildren?r.templateChildren:(0,n.nodeList2Array)(e.childNodes);const i={children:r.templateChildren},c=(0,o.createFunctionContext)(e,r,t,a),u=await r.func.bind({...c.this})(a);if(c.validateAndLock(),a.abortController.signal.aborted)return;if(function(e,t,r){let n=!1,o=!0;for(const e of t.contextCalls)if(e.checkChanged){const t=e.checkChanged();if(n=n||t.shouldAbort,n&&o&&t.shouldAbort&&!t.shouldRefresh){o=!1;break}}n&&((0,s.log)(s.LOG_LEVEL.debug,"render aborted before apply for %o",e),r.abortController.abort(),o&&setTimeout((function(){t.refresh()}),0))}(e,r,a),a.abortController.signal.aborted)return;const l={...i,...r.templateValues,...u&&"string"!=typeof u&&u.values?u.values:{}};return r.templateValues={},u?"string"==typeof u?{template:u,values:l}:{template:u.template,values:l}:r.template?{template:r.template,values:l}:void 0}}(e,t,r),void 0,t?function(){(0,a.flushEffects)(r.mountEffects,r.mountEffectCallbacks)}:void 0,r.renderCallback)}},464:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attributeEffect=t.useJSONAttribute=t.useAttribute=void 0;const n=r(814),o=r(146);function s(e,t,r){const n=e.getAttribute(t);return null===n?r:n}function a(e,t,r,n,a,i,c=!0){const u=s(e,a,i);return(0,o.log)(o.LOG_LEVEL.trace,"useAttribute %o with value = %o",e,u),c&&-1===r.attributeWatch.indexOf(a)&&(r.attributeWatch.push(a),t.lastValue=u,t.checkChanged=function(){return{shouldAbort:t.lastValue!==s(e,a,i),shouldRefresh:!0}}),u}t.useAttribute=a,t.useJSONAttribute=function(e,t,r,n,s,i){const c=a(e,t,r,0,s,i);return(0,o.log)(o.LOG_LEVEL.trace,"useJSONAttribute %o with value = %o",e,c),"string"==typeof c&&""!==c?JSON.parse(c):c},t.attributeEffect=function(e,t){return function(){return n.mutationObserverObserve.call(t.observer,e,{attributes:!0,attributeFilter:t.attributeWatch}),()=>{n.mutationObserverDisconnect.call(t.observer)}}}},45:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flushEffectCallbacks=t.flushEffects=t.useMountEffect=t.useEffect=void 0;const n=r(146);t.useEffect=function(e,t,r,n,o){r.effects.push(o)},t.useMountEffect=function(e,t,r,n,o){t.firstRun&&r.mountEffects.push(o)},t.flushEffects=function(e,t){const r=e.splice(0,e.length);for(const e of r)try{const r=e();r&&t.push(r)}catch(e){(0,n.log)(n.LOG_LEVEL.error,e)}},t.flushEffectCallbacks=function(e){const t=e.splice(0,e.length);for(const e of t)try{e()}catch(e){(0,n.log)(n.LOG_LEVEL.error,e)}}},495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAs=t.useSubscription=t.useState=t.queryEffect=t.useQuery=t.flushEffectCallbacks=t.flushEffects=t.useEffect=t.useMountEffect=t.attributeEffect=t.useAttribute=t.useJSONAttribute=void 0;var n=r(464);Object.defineProperty(t,"useJSONAttribute",{enumerable:!0,get:function(){return n.useJSONAttribute}}),Object.defineProperty(t,"useAttribute",{enumerable:!0,get:function(){return n.useAttribute}}),Object.defineProperty(t,"attributeEffect",{enumerable:!0,get:function(){return n.attributeEffect}});var o=r(45);Object.defineProperty(t,"useMountEffect",{enumerable:!0,get:function(){return o.useMountEffect}}),Object.defineProperty(t,"useEffect",{enumerable:!0,get:function(){return o.useEffect}}),Object.defineProperty(t,"flushEffects",{enumerable:!0,get:function(){return o.flushEffects}}),Object.defineProperty(t,"flushEffectCallbacks",{enumerable:!0,get:function(){return o.flushEffectCallbacks}});var s=r(447);Object.defineProperty(t,"useQuery",{enumerable:!0,get:function(){return s.useQuery}}),Object.defineProperty(t,"queryEffect",{enumerable:!0,get:function(){return s.queryEffect}});var a=r(819);Object.defineProperty(t,"useState",{enumerable:!0,get:function(){return a.useState}});var i=r(408);Object.defineProperty(t,"useSubscription",{enumerable:!0,get:function(){return i.useSubscription}});var c=r(191);Object.defineProperty(t,"useAs",{enumerable:!0,get:function(){return c.useAs}})},447:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryEffect=t.useQuery=void 0;const n=r(814),o=r(504);t.useQuery=function(e,t,r,n,s,a){const i=(0,o.getQueryValue)(s,a);return-1===r.queryWatch.indexOf(s)&&(r.queryWatch.push(s),t.lastValue=i,t.checkChanged=function(){return{shouldAbort:t.lastValue!==(0,o.getQueryValue)(s,a),shouldRefresh:!0}}),[i,e=>{(0,o.setQueryValue)(s,e)}]},t.queryEffect=function(e){return function(){const t=e.contextCalls.filter((e=>"useQuery"===e.call));function r(){let r=!1;for(const e of t)if(e.checkChanged&&e.checkChanged()){r=!0;break}r&&e.refresh()}return(0,n.windowAddEventListener)("popstate",r),function(){(0,n.windowRemoveEventListener)("popstate",r)}}}},819:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useState=void 0,t.useState=function(e,t,r,n,o){const s=t.name;function a(){return void 0!==r.state[s]?r.state[s]:o}const i=a();return r.state[s]=i,t.lastValue=i,t.checkChanged=function(){return{shouldAbort:t.lastValue!==a(),shouldRefresh:!1}},[i,function(e){r.state[s]!==e&&(n.abortController.abort(),r.state[s]=e,setTimeout((function(){r.refresh()}),0))},a]}},408:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSubscription=void 0,t.useSubscription=function(e,t,r,n,o,s){function a(e){n.abortController.abort(),setTimeout((function(){r.refresh()}))}const i=o.subscribe(s,a);return this.useEffect((()=>()=>{o.unSubscribe(a)})),t.lastValue=i,t.checkChanged=function(){return{shouldAbort:t.lastValue!==s(o.getState()),shouldRefresh:!1}},i}},504:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setQueryValue=t.getQueryValue=void 0;const n=r(814),o=URLSearchParams.prototype.getAll,s=URLSearchParams.prototype.set,a=URLSearchParams.prototype.append,i=URLSearchParams.prototype.delete;URLSearchParams.prototype.toString,t.getQueryValue=function(e,t){const r=o.call(new URL(window.location.href).searchParams,e);return 0===r.length?void 0!==t?t:null:r&&1===r.length?r[0]:r},t.setQueryValue=function(e,t){const r=new URL(window.location.href);if(t instanceof Array)for(const n of t)a.call(r.searchParams,e,n);else null!==t?s.call(r.searchParams,e,t):i.call(r.searchParams,e);window.history.pushState(null,"",String(r)),(0,n.windowDispatchEvent)(new PopStateEvent("popstate"))}},191:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAs=void 0;const n=r(814);t.useAs=function(e,t,r,o,s,a){t.name=s,(0,n.set)(r.templateValues,s,a)}},846:(e,t,r)=>{"use strict";t.VY=void 0;var n=r(329);Object.defineProperty(t,"VY",{enumerable:!0,get:function(){return n.defineFunction}});r(738),r(794),r(141),r(132),r(146)},146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.setLogLevel=t.LOG_LEVEL=void 0,t.LOG_LEVEL={info:"info",debug:"debug",trace:"trace",warn:"warn",error:"error"};const r={trace:0,debug:1,info:2,warn:3,error:4,none:5},n=r.warn;let o=null;t.setLogLevel=function(e){if(null!==o)throw new Error("cannot change LOG_LEVEL at this stage!");o=r[e]},t.log=function(e,t,...s){null===o&&(o=n),o<=r[e]&&console["trace"===e?e:"debug"](t,...s)}},787:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.historyPushPath=void 0;const n=r(632),o=r(146),s=r(814);t.historyPushPath=function(e){(0,o.log)(o.LOG_LEVEL.debug,"historyPushPath(%s)",e),window.history.pushState({},"",(0,n.BASE_PATH)()+e),(0,s.windowDispatchEvent)(new PopStateEvent("popstate"))}},141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RouteLink=t.PathRouter=t.historyPushPath=void 0;var n=r(787);Object.defineProperty(t,"historyPushPath",{enumerable:!0,get:function(){return n.historyPushPath}});var o=r(19);Object.defineProperty(t,"PathRouter",{enumerable:!0,get:function(){return o.PathRouter}});var s=r(899);Object.defineProperty(t,"RouteLink",{enumerable:!0,get:function(){return s.RouteLink}})},899:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RouteLink=void 0;const n=r(787),o=r(632),s=r(814);function a(e,t,r){const n=(0,o.isPathLocation)(t||void 0);e.classList.contains(r)&&!n?e.classList.remove(r):!e.classList.contains(r)&&n&&e.classList.add(r)}t.RouteLink=function(){const e=this.useAttribute("data-path","/"),t=this.useAttribute("data-active-class","active",!1),r=this.element;return a(r,e,t),this.useEffect((function(){function o(t){t.preventDefault(),(0,n.historyPushPath)(e)}function i(){a(r,e,t)}return r.addEventListener("click",o),(0,s.windowAddEventListener)("popstate",i),function(){r.removeEventListener("click",o),(0,s.windowRemoveEventListener)("popstate",i)}})),"{children}"}},19:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathRouter=void 0;const n=r(632),o=r(814),s=r(146);t.PathRouter=function(){const e=this.useAttribute("data-routes"),t=this.useAttribute("data-default-element"),r=e?JSON.parse(e):[],a=(0,n.getActiveRoute)(r),[i,c,u]=this.useState(a||{element:t});this.useEffect((function(){function e(){const e=u(),o=(0,n.getActiveRoute)(r,e);(0,s.log)(s.LOG_LEVEL.trace,"PathRouter popStateListener currentActive %o vs newActive %o",e,o),void 0===o&&e!==t?c({element:t}):o!==e&&c(o)}return(0,o.windowAddEventListener)("popstate",e),function(){(0,o.windowRemoveEventListener)("popstate",e)}}));const l=i?i.element:void 0;return l?"function"==typeof(d=l)?d():`<${d}/>`:"";var d}},632:(e,t)=>{"use strict";function r(e){if(void 0===e)return!1;const r=o((0,t.BASE_PATH)()+e);return o(location.pathname).toLowerCase()===r.toLowerCase()}function n(e,t,o=!0){let s=o&&e.isDefault||r(e.path);return t&&e.element!==t.element&&s&&n(t,t,!1)&&(s=!1),s}function o(e){return e.length>1&&"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e}Object.defineProperty(t,"__esModule",{value:!0}),t.getActiveRoute=t.isRouteActive=t.isPathLocation=t.BASE_PATH=void 0,t.BASE_PATH=()=>o(document.documentElement.getAttribute("data-router-base-path")?document.documentElement.getAttribute("data-router-base-path"):""),t.isPathLocation=r,t.isRouteActive=n,t.getActiveRoute=function(e,t){let r;for(const o of e)n(o,r||t)&&(r=o);return r}},132:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Store=void 0;const n=r(146),o=r(814);class s extends EventTarget{constructor(e,t,r){super(),this.reducers=e,this.state=t,this.listenerMap=new Map,this.options={dispatchTimeout:0,...r||{}}}subscribe(e,t){const r=e(this.state);return o.mapSet.call(this.listenerMap,t,{lastResult:r,selector:e}),r}unSubscribe(e){return o.mapDelete.call(this.listenerMap,e)}getState(){return{...this.state}}dispatch(e){const t=this.getState();this.state="function"==typeof this.reducers?this.reducers(e,t):this.reducers[e.type]?this.reducers[e.type](e,t):t,clearTimeout(this.triggerListenerTimeout),t!==this.state&&(this.triggerListenerTimeout=setTimeout((()=>function(e,t,r){const s=e.getState(),a=o.mapKeys.call(r);for(const t of a){const a=o.mapGet.call(r,t);if(a)try{const e=a.selector(s);e!==a.lastResult&&((0,n.log)(n.LOG_LEVEL.trace,"dispatch listener"),a.lastResult=e,t(e))}catch(t){(0,n.log)(n.LOG_LEVEL.error,t),e.dispatchEvent(new ErrorEvent(String(t)+" "+String(t.stack)))}}}(this,0,this.listenerMap)),this.options.dispatchTimeout))}}t.Store=s},708:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTemplateFromLocation=t.setCache=void 0;const n=r(814);let o=null;function s(e){return"string"==typeof e?e:`${e.url}`}function a(e,t){o=null!==o?o:new Map;const r=s(e),a={template:t,xmlDocument:(0,n.parseXML)(t)};return n.mapSet.call(o,r,a),a}t.setCache=function(e){if(!e)throw new Error("invalid cache!");if(null!==o)throw new Error("cannot reset cache");{o=new Map;const t=Object.keys(e);for(const r of t)a(r,e[r])}},t.getTemplateFromLocation=function(e){const t=function(e){const t=s(e);if(o)return n.mapGet.call(o,t)}(e="string"==typeof e?{url:e}:e);return void 0!==t?t:new Promise(((t,r)=>{try{(async function(e){const t="string"==typeof e,r=t?e:e.url,n=await fetch(r,t?{}:{method:e.method});if(n.status<200||n.status>=300)throw new Error(`bad response status [${n.status}] from [${r}]`);return a(e,await n.text())})(e).then((e=>{t(e)})).catch((t=>{a(e,""),r(t)}))}catch(e){r(e)}}))}},794:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.set=t.nodeList2Array=t.render=t.hasCache=t.disconnect=t.getTemplateFromLocation=t.setCache=void 0;var n=r(708);Object.defineProperty(t,"setCache",{enumerable:!0,get:function(){return n.setCache}}),Object.defineProperty(t,"getTemplateFromLocation",{enumerable:!0,get:function(){return n.getTemplateFromLocation}});var o=r(576);Object.defineProperty(t,"disconnect",{enumerable:!0,get:function(){return o.disconnect}}),Object.defineProperty(t,"hasCache",{enumerable:!0,get:function(){return o.hasCache}});var s=r(478);Object.defineProperty(t,"render",{enumerable:!0,get:function(){return s.render}});var a=r(814);Object.defineProperty(t,"nodeList2Array",{enumerable:!0,get:function(){return a.nodeList2Array}}),Object.defineProperty(t,"set",{enumerable:!0,get:function(){return a.set}}),Object.defineProperty(t,"get",{enumerable:!0,get:function(){return a.get}})},138:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderChildNodes=void 0;const n=r(609);t.renderChildNodes=async function(e,t){let r=[];for(let o=0;o<e.length;o++){const s=e[o];s&&(s.nodeType===Node.COMMENT_NODE&&null!==s.textContent?r=r.concat(await(0,n.renderCommentNode)(s,t)):s.nodeType===Node.TEXT_NODE&&null!==s.textContent?r=r.concat((0,n.renderTextNode)(s,t)):s.nodeType===Node.ELEMENT_NODE&&(r=r.concat(await(0,n.renderElementNode)(s,t))))}return r}},478:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.render=t.addRenderListener=t.cancelRender=t.isRenderQueued=void 0;const n=r(814),o=r(576),s=r(146);function a(e){const t=n.weakMapGet.call(c,e);if(t&&t.timeout){clearTimeout(t.timeout),t.abortController.abort(),t.timeout=null;const r=e instanceof ShadowRoot&&e.host?e.host:e;(0,s.log)(s.LOG_LEVEL.debug,"canceling render on %o",r)}}function i(e,t){const r=n.weakMapGet.call(c,e);r&&r.eventTarget.addEventListener("render",t)}t.isRenderQueued=function(e){return n.weakMapHas.call(c,e)},t.cancelRender=a,t.addRenderListener=i,t.render=function(e,t,r,u,l){a(e);const d=Date.now(),f=e instanceof ShadowRoot&&e.host?e.host:e,p=(0,o.hasCache)(e)?"update":"create";(0,s.log)(s.LOG_LEVEL.trace,"queue render %s %o",p,f);const h=n.weakMapGet.call(c,e),b=new AbortController,m=h?h.eventTarget:new EventTarget,v=setTimeout((async function(){const a=setTimeout((function(){(0,s.log)(s.LOG_LEVEL.warn,"render %s %o max timeout %s",p,f,6e4),b.abort()}),6e4);try{if((0,s.log)(s.LOG_LEVEL.trace,"render %s %o",p,f),b.signal.aborted)return;const i=await(0,o.render)(b,e,t,r);if(b.signal.aborted)return;if(i){const e=i.apply();try{l&&l()}catch(e){(0,s.log)(s.LOG_LEVEL.error,e)}if(e){const e=Date.now()-d;e>50?(0,s.log)(s.LOG_LEVEL.warn,"render %s %o took %sms!",p,f,e):(0,s.log)(s.LOG_LEVEL.debug,"render %s %o took %sms",p,f,e),m.dispatchEvent(new CustomEvent("render",{detail:b.signal}))}}}catch(e){(0,s.log)(s.LOG_LEVEL.error,"error rendering %o %o",f,e)}finally{clearTimeout(a),n.weakMapGet.call(c,e)&&n.weakMapDelete.call(c,e)}}),0);n.weakMapSet.call(c,e,{eventTarget:m,abortController:b,timeout:v}),u&&i(e,u)};const c=new WeakMap},437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTemplate=void 0;const n=r(138),o=r(814),s=r(146);t.renderTemplate=function(e,t,r){if(e instanceof Array&&(e=e.filter((e=>e)).map((e=>String(e))).join("")),"string"==typeof e){(0,s.log)(s.LOG_LEVEL.trace,r?"using cache":"not using cache");const a=(r||(0,o.parseXML)(e)).children[0];return(0,n.renderChildNodes)(a.childNodes,t)}}},576:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.render=t.hasCache=t.disconnect=void 0;const n=r(814),o=r(436),s=r(437),a=r(146),i=r(478);t.disconnect=function(e){(0,i.cancelRender)(e);const t=n.weakMapGet.call(c,e);t&&u(t.output)},t.hasCache=function(e){return n.weakMapHas.call(c,e)},t.render=async function(e,t,r,i){if((0,a.log)(a.LOG_LEVEL.trace,"render %o",t),void 0!==i&&"function"==typeof r)throw new Error("cannot provide a RenderFunction with values");const l="string"==typeof r?r:"function"==typeof r?await r({abortController:e}):r?await r:void 0,d="object"==typeof l?l.values:i;let f=l instanceof Array?l:"object"==typeof l?await l.template:await l;const p=f instanceof Array?f.join():f;if(f=void 0,e.signal.aborted)(0,a.log)(a.LOG_LEVEL.trace,"render aborted %o",t);else if(p){const{output:r,xmlDocument:i}=await async function(e,t,r){const o=n.weakMapGet.call(c,t),a=o&&o.template===e?o.xmlDocument:(0,n.parseXML)(e);return{output:await(0,s.renderTemplate)(e,r,a),xmlDocument:a}}(p,t,d||Object.create(null));return e.signal.aborted?void(0,a.log)(a.LOG_LEVEL.trace,"render aborted %o",t):{apply:()=>e.signal.aborted?((0,a.log)(a.LOG_LEVEL.trace,"render aborted %o",t),!1):function(e,t,r,s,i){if(e.signal.aborted)return(0,a.log)(a.LOG_LEVEL.trace,"render aborted %o",s),!1;const l=n.weakMapGet.call(c,s);if(i){const e=(0,o.renderTemplateNodeDiff)(s,i,l?.output);return n.weakMapSet.call(c,s,{output:i,template:r,xmlDocument:t}),l&&u(l.output),e}return!1}(e,i,p,t,r)}}};const c=new WeakMap;function u(e){for(const t of e){const e=t.children;t.disconnect(t.ref),e&&u(e)}}},226:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=void 0,t.get=function(e,t,r){if(r=void 0!==r?r:void 0,!e||"object"!=typeof e)return void 0!==r?r:void 0;if("string"!=typeof t&&!(t instanceof Array))throw new Error("attrPath must be typeof string or string[]");const n=(t instanceof Array?t:t.split(".")).reverse();if(n.filter((e=>"__prototype__"===e||"__proto__"===e)).length>0)throw new Error("invalid attrPath");let o=e;for(;n.length>0;){const e=n.pop();if(void 0===o[e])return void 0!==r?r:void 0;o=o[e]}return o}},814:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseXML=t.windowRemoveEventListener=t.windowAddEventListener=t.windowDispatchEvent=t.mutationObserverDisconnect=t.mutationObserverObserve=t.mapDelete=t.mapSet=t.mapHas=t.mapGet=t.mapKeys=t.weakMapDelete=t.weakMapSet=t.weakMapHas=t.weakMapGet=t.appendChildren=t.removeChildren=t.removeChild=t.removeChildrenFrom=t.re=t.nodeList2Array=t.evaluateTextTemplateForAttribute=t.getTemplateTokenValue=t.set=t.get=void 0;var n=r(226);Object.defineProperty(t,"get",{enumerable:!0,get:function(){return n.get}});var o=r(696);Object.defineProperty(t,"set",{enumerable:!0,get:function(){return o.set}});var s=r(162);Object.defineProperty(t,"getTemplateTokenValue",{enumerable:!0,get:function(){return s.getTemplateTokenValue}}),Object.defineProperty(t,"evaluateTextTemplateForAttribute",{enumerable:!0,get:function(){return s.evaluateTextTemplateForAttribute}}),Object.defineProperty(t,"nodeList2Array",{enumerable:!0,get:function(){return s.nodeList2Array}}),Object.defineProperty(t,"re",{enumerable:!0,get:function(){return s.re}}),Object.defineProperty(t,"removeChildrenFrom",{enumerable:!0,get:function(){return s.removeChildrenFrom}}),Object.defineProperty(t,"removeChild",{enumerable:!0,get:function(){return s.removeChild}}),Object.defineProperty(t,"removeChildren",{enumerable:!0,get:function(){return s.removeChildren}}),Object.defineProperty(t,"appendChildren",{enumerable:!0,get:function(){return s.appendChildren}}),t.weakMapGet=WeakMap.prototype.get,t.weakMapHas=WeakMap.prototype.has,t.weakMapSet=WeakMap.prototype.set,t.weakMapDelete=WeakMap.prototype.delete,t.mapKeys=Map.prototype.keys,t.mapGet=Map.prototype.get,t.mapHas=Map.prototype.has,t.mapSet=Map.prototype.set,t.mapDelete=Map.prototype.delete,t.mutationObserverObserve=MutationObserver.prototype.observe,t.mutationObserverDisconnect=MutationObserver.prototype.disconnect,t.windowDispatchEvent=window.dispatchEvent,t.windowAddEventListener=window.addEventListener,t.windowRemoveEventListener=window.removeEventListener;const a=DOMParser.prototype.parseFromString;t.parseXML=function(e){return a.call(new DOMParser,`<root>${e}</root>`,"text/xml")}},696:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.set=void 0,t.set=function(e,t,r){if("string"!=typeof t&&!(t instanceof Array))throw new Error("attrPath must be typeof string or string[]");const n=(t instanceof Array?t:t.split(".")).reverse();if(n.filter((e=>"__prototype__"===e||"__proto__"===e)).length>0)throw new Error("invalid attrPath");let o=e;for(;n.length>0;){const e=n.pop();0===n.length?o[e]=r:(void 0===o[e]&&(o[e]={}),o=o[e])}return e}},162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeChildren=t.appendChildren=t.removeChildrenFrom=t.removeChild=t.evaluateTextTemplateForAttribute=t.re=t.getTemplateTokenValue=t.nodeList2Array=void 0;const n=r(226);function o(e){if(e&&"string"==typeof e&&e.length>3&&"{"===e.charAt(0)&&"}"===e.charAt(e.length-1)){const t=e.substring(1,e.length-1);return t&&-1===t.indexOf(" ")?t:void 0}}function s(e){e.ref&&(e.parent?a(e.parent,e.ref):e.ref.remove())}function a(e,t){if(t instanceof Array)for(const r of t)e.removeChild(r);else e.removeChild(t)}t.nodeList2Array=function(e){const t=[];if(e)for(let r=0;r<e.length;r++)t.push(e[r]);return t},t.getTemplateTokenValue=o,t.re=/{[^%^{^}^\s]+}/g,t.evaluateTextTemplateForAttribute=function(e,r){return e.replace(t.re,(e=>{const t=o(e);return t?function(e,t){if("function"==typeof e){const r=e.bind(t);return String(r())}return void 0!==e?String(e):""}((0,n.get)(r,t),r.this):e}))},t.removeChild=s,t.removeChildrenFrom=function(e,t){e.splice(t).forEach(s)},t.appendChildren=function(e,t){if(t instanceof Array)for(const r of t)e.appendChild(r);else e.appendChild(t)},t.removeChildren=a},436:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTemplateNodeDiff=t.TemplateNode=void 0;var n=r(776);Object.defineProperty(t,"TemplateNode",{enumerable:!0,get:function(){return n.TemplateNode}});const o=r(162);t.renderTemplateNodeDiff=function e(t,r,n){let s;n=n?[...n]:[],r=r?[...r]:[];let a=!1;for(s=0;s<r.length;s++){const i=r[s],c=n[s];if(void 0===c){a=!0;const e=i.create(t);(0,o.appendChildren)(t,e)}else if(c.type!==i.type){a=!0,(0,o.removeChildrenFrom)(n,s);const e=i.create(t);(0,o.appendChildren)(t,e)}else if(i.compare(c)){const t=c.ref,r=c.children;i.update(t)&&(a=!0),e(t,i.children,r)&&(a=!0)}else{a=!0,(0,o.removeChildrenFrom)(n,s);const e=i.create(t);(0,o.appendChildren)(t,e)}}return n&&(0,o.removeChildrenFrom)(n,s),a}},106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DATA_STATE=t.DATA_IFN=t.DATA_IF=t.DATA_ON=t.DATA_REF=t.DATA_FOR_EACH_ITEM=t.DATA_FOR_EACH=void 0,t.DATA_FOR_EACH="data-for-each",t.DATA_FOR_EACH_ITEM="data-for-each-item",t.DATA_REF="data-ref",t.DATA_ON="data-on-",t.DATA_IF="data-if",t.DATA_IFN="data-ifn",t.DATA_STATE="data-state"},971:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataForEach=void 0;const n=r(814),o=r(106),s=r(146);t.dataForEach=async function(e,t,r){const a=e.getAttribute(o.DATA_FOR_EACH),i=e.getAttribute(o.DATA_FOR_EACH_ITEM);if(null!==a){const c=[],u=(0,n.getTemplateTokenValue)(a);let l=u&&(0,n.get)(t,u);if(l="function"==typeof l?l.bind(t.this)():l,u&&l&&l instanceof Array){const n={...t};for(let t=0;t<l.length;t++){n[null!==i?i:"item"]=l[t],n.index=t;const o=await r(e,n);o&&c.push(o)}return c}throw(0,s.log)(s.LOG_LEVEL.error,"invalid value for %s [%s]=[%o] for [%o]",o.DATA_FOR_EACH,a,l,t.this),new Error(`invalid value for ${o.DATA_FOR_EACH}`)}{const n=await r(e,t);return n?[n]:[]}}},912:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataIf=t.dataIfn=void 0;const n=r(814),o=r(106),s=r(146);t.dataIfn=function(e,t){const r=e.getAttribute(o.DATA_IFN);if(null!==r){const e=(0,n.getTemplateTokenValue)(r);if(!e)throw(0,s.log)(s.LOG_LEVEL.error,"invalid value for %s [%s] for [%o]",o.DATA_IFN,r,t.this),new Error(`invalid value for ${o.DATA_IFN}`);let a=e&&(0,n.get)(t,e);return a="function"==typeof a?a.bind(t.this)():a,!a}return!0},t.dataIf=function(e,t){const r=e.getAttribute(o.DATA_IF);if(null!==r){const e=(0,n.getTemplateTokenValue)(r);if(!e)throw(0,s.log)(s.LOG_LEVEL.error,"invalid value for %s [%s] for [%o]",o.DATA_IF,r,t.this),new Error(`invalid value for ${o.DATA_IF}`);let a=e&&(0,n.get)(t,e);return a="function"==typeof a?a.bind(t.this)():a,!!a}return!0}},361:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataOnAndOtherAttributes=void 0;const n=r(106),o=r(814),s=r(146),a=[n.DATA_REF,n.DATA_IF,n.DATA_STATE,n.DATA_FOR_EACH,n.DATA_FOR_EACH_ITEM];t.dataOnAndOtherAttributes=function(e,t,r){const i=e.getAttributeNames();for(const c of i)if(-1===a.indexOf(c)){const a=e.getAttribute(c);if(a)if(0===c.indexOf(n.DATA_ON)){const i=a?c.substring(n.DATA_ON.length):void 0,u=a?(0,o.getTemplateTokenValue)(a):void 0,l=u?(0,o.get)(t,u):void 0,d=l&&"function"==typeof l?l.bind(t.this):void 0;if(!d||!i)throw(0,s.log)(s.LOG_LEVEL.error,"invalid value for %s [%s]=[%o][%o] for [%o]",c,a,t,l,e),new Error(`invalid value for ${c}`);r.listeners.push({eventName:i,callback:d})}else r.attributes.push({attribute:c,value:(0,o.evaluateTextTemplateForAttribute)(a,t)});else r.attributes.push({attribute:c,value:""})}}},867:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataRef=void 0;const n=r(814),o=r(106),s=r(146);t.dataRef=function(e,t,r){const a=e.getAttribute(o.DATA_REF);if(null!==a){const e=(0,n.getTemplateTokenValue)(a),i=e?(0,n.get)(t,e):void 0,c=i&&"function"==typeof i?i.bind(t.this):void 0;if(!c)throw(0,s.log)(s.LOG_LEVEL.error,"invalid value for %s [%s]=[%o] for [%o]",o.DATA_REF,a,i,t.this),new Error(`invalid value for ${o.DATA_REF}`);r.refListeners.push({listener:c})}}},36:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(971),t),o(r(912),t),o(r(361),t),o(r(867),t)},283:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderCommentNode=void 0;const n=r(814),o=r(708),s=r(776),a=r(437);class i extends s.TemplateNode{constructor(e){super("Comment"),this.textContent=e}create(e){if(this.ref)throw new Error("already created!");this.parent=e;const t=document.createComment("");return this.update(t),t}update(e){return super.update(e),e.textContent!==this.textContent&&(e.textContent=this.textContent,!0)}}t.renderCommentNode=async function(e,t){const r=(0,n.getTemplateTokenValue)(e.textContent);if(r){const e=(0,o.getTemplateFromLocation)(r);if(e instanceof Promise){const r=await e;return(0,a.renderTemplate)(r.template,t,r.xmlDocument)||[]}return(0,a.renderTemplate)(e.template,t,e.xmlDocument)||[]}return e.textContent?[new i(e.textContent)]:[]}},223:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderElementNode=t.TemplateElementNode=void 0;const n=r(36),o=r(138),s=r(776);class a extends s.TemplateNode{constructor(e){super("Element"),this.tagName=e,this.children=[],this.attributes=[],this.listeners=[],this.refListeners=[]}create(e){if(this.ref)throw new Error("already created!");this.parent=e;const t=document.createElement(this.tagName);this.update(t,!0);for(const e of this.refListeners)e.listener(t);if(this.children)for(const e of this.children)try{const r=e.create(t);t.appendChild(r)}catch(e){throw e}return t}update(e,t=!1){super.update(e);let r=!1;for(const t of this.attributes)e.getAttribute(t.attribute)!==t.value&&(r=!0,e.setAttribute(t.attribute,t.value));for(const t of this.listeners)e.addEventListener(t.eventName,t.callback);return r}disconnect(e){for(const t of this.listeners)e.removeEventListener(t.eventName,t.callback);super.disconnect(e)}compare(e){return super.compare(e)&&e.tagName===this.tagName}toString(){return`${this.type} TemplateNode ${this.tagName}`}}t.TemplateElementNode=a,t.renderElementNode=async function(e,t){return(0,n.dataForEach)(e,t,(async(e,t)=>{if((0,n.dataIf)(e,t)&&(0,n.dataIfn)(e,t)){const r=e.tagName,s=new a(r);return(0,n.dataRef)(e,t,s),(0,n.dataOnAndOtherAttributes)(e,t,s),s.children=await(0,o.renderChildNodes)(e.childNodes,t),s}}))}},609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTextNode=t.renderElementNode=t.renderCommentNode=void 0;var n=r(283);Object.defineProperty(t,"renderCommentNode",{enumerable:!0,get:function(){return n.renderCommentNode}});var o=r(223);Object.defineProperty(t,"renderElementNode",{enumerable:!0,get:function(){return o.renderElementNode}});var s=r(810);Object.defineProperty(t,"renderTextNode",{enumerable:!0,get:function(){return s.renderTextNode}})},776:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateNode=void 0,t.TemplateNode=class{constructor(e){this.type=e}create(e){throw new Error("not implemented!")}update(e){if(!e)throw new Error("bad ref!");if(this.ref&&this.ref!==e)throw new Error("already created!");return this.ref||(this.ref=e),!1}disconnect(e){}compare(e){return e.type===this.type}toString(){return`${this.type} TemplateNode`}}},810:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderTextNode=void 0;const n=r(814),o=r(776);class s extends o.TemplateNode{constructor(e){super("Text"),this.textContent=e}create(e){if(this.ref)throw new Error("already created!");this.parent=e;const t=document.createTextNode("");return this.update(t),t}update(e){return super.update(e),e.textContent!==this.textContent&&(e.textContent=this.textContent,!0)}}class a extends o.TemplateNode{constructor(e){super("HTMLElementRef"),this.ref=e}create(e){return this.parent=e,this.update(this.ref),this.ref}compare(e){return super.compare(e)&&e.ref===this.ref}}t.renderTextNode=function(e,t){let r=[];if(e.textContent){const o=new s("");let i=o;o.textContent=e.textContent.replace(n.re,(e=>{const o=(0,n.getTemplateTokenValue)(e);if(o){let e=(0,n.get)(t,o);if("function"==typeof e){const r=e.bind(t.this);e=r()}const c=e instanceof Array&&0===e.filter((e=>!(e instanceof Node))).length;if(c||e instanceof HTMLElement){r.push(i);const t=c?e:[e];return r=r.concat(t.map((e=>new a(e)))),i=new s(""),""}return 0===r.length?String(e):(i.textContent+=String(e),"")}return 0===r.length?e:(i.textContent+=e,"")})),""!==i.textContent&&r.push(i)}return r}},468:(e,t,r)=>{r(846).VY("my-component",(async function(){this.useAs("text","helloWorld")}),void 0,"<p >{text}</p>")}},t={};!function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(468)})();