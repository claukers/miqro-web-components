(()=>{var t={481:(t,e)=>{"use strict";function s(t,e,s){if(!t||"object"!=typeof t)return void 0!==s?s:void 0;if("string"!=typeof e)throw new Error("attrPath must be typeof string");const n=e.split(".").reverse();let o=t;for(;n.length>0;){const t=n.pop();if(void 0===o[t])return void 0!==s?s:void 0;o=o[t]}return o}function n(t,e){const n=t.getAttributeNames(),o={};for(const r of n){const n=t.getAttribute(r);if(e&&n&&"{"===n.charAt(0)&&"}"===n.charAt(n.length-1)){const t=s(e,n.substring(1,n.length-1));if("function"==typeof t){const s=t;o[r]=s.bind(e)}else void 0!==t&&(o[r]=t)}else null!=n&&(o[r]=n)}return o}function o(t,e){const s=Object.keys(e);for(const n of s){const s=e[n];if("function"==typeof s)if("data-ref"===n)s(t);else if(0===n.indexOf("data-on-")){const e=n.substring("data-on-".length);t.addEventListener(e,s)}else console.error("Cannot use attribute [%s] with function as value. Only data-on-... and data-ref are allowed. Use custom events for using data-on... with custom events or use the helpers .emit and .registerEvent to use custom events.",n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.renderOnElement=e.renderElementProps=void 0,e.renderElementProps=n,e.renderOnElement=function(t,e){if(t.render){const i=t.render();if("string"==typeof i){const a=(r=t,i.replace(/{[^}]*}/g,(t=>{const e=t.substring(1,t.length-1),n=s(r,e);return"function"==typeof n?t:"string"==typeof n||"boolean"==typeof n||"number"==typeof n?function(t){const e=[];for(let s=t.length-1;s>=0;s--)e.unshift(["&#",t[s].charCodeAt(0),";"].join(""));return e.join("")}(String(n)):null==n?"":t})));if(void 0!==a){e.innerHTML=a;const s=e.querySelectorAll("*");for(let e=0;e<s.length;e++){const r=s[e],i=n(r,t),a=r,c=Object.keys(i).filter((t=>i[t]&&"object"==typeof i[t]));if(a.setProps&&c.length>0){const t={};for(const e of c)t[e]=i[e];a.setProps(t)}o(r,i)}t.afterRender&&t.afterRender()}}}var r}},455:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;const n=s(481),o=s(530);class r extends HTMLElement{constructor(){super(),this._emitter=new o.EventEmitter,this._observer=new MutationObserver((t=>{const e={};for(const s of t)if("attributes"===s.type){const t=s.attributeName,n=this.getAttribute(t);e[t]=n}this.setProps(e)})),this.props=(0,n.renderElementProps)(this),this.state={}}connectedCallback(){this._observer.observe(this,{attributes:!0}),this.setProps((0,n.renderElementProps)(this),!1,!1),this.willMount(),this._renderOnElement(),this.didMount()}disconnectedCallback(){this._observer.disconnect(),this.didUnMount()}render(){}willMount(){}didMount(){}didUnMount(){}afterRender(){}emit(t){return this._emitter.emit(t,this)}registerEvent(t,e){return this._emitter.registerEvent(t,e)}setState(t,e=!1,s=!0){const n=this.state;if(this.state=e?t:{...this.state,...t},s&&this.isConnected&&this.didUpdate(this.props,n))return this._renderOnElement()}setProps(t,e=!1,s=!0){const n=this.props;if(this.props=e?t:{...this.props,...t},s&&this.isConnected&&this.didUpdate(n,this.state))return this._renderOnElement()}didUpdate(t,e){return!0}_renderOnElement(){return(0,n.renderOnElement)(this,this)}}e.Component=r},530:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0,e.EventEmitter=class{constructor(t){this.defaultOptions=t,this._events=new Map}emit(t,e){this._events.has(t)||this.registerEvent(t),e.dispatchEvent(this._events.get(t))}registerEvent(t,e){this._events.set(t,new Event(t,e||this.defaultOptions))}}},846:function(t,e,s){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,s,n){void 0===n&&(n=s),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,n){void 0===n&&(n=s),t[n]=e[s]}),o=this&&this.__exportStar||function(t,e){for(var s in t)"default"===s||Object.prototype.hasOwnProperty.call(e,s)||n(e,t,s)};Object.defineProperty(e,"__esModule",{value:!0}),o(s(455),e),o(s(275),e),o(s(683),e)},683:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.historyPushPath=e.RouteLink=e.Route=e.Router=void 0;const n=s(455),o=document.documentElement.getAttribute("data-router-base-path")?document.documentElement.getAttribute("data-router-base-path"):"";class r extends n.Component{constructor(){if(super(),this.popStateListener=()=>{this._updateActive()},this.props["data-default-element"]){const t=new i;t.setAttribute("data-element",this.props["data-default-element"]),t.setAttribute("data-default",""),this.appendChild(t)}console.log("Router ctor"),console.dir(this.props)}willMount(){window.addEventListener("popstate",this.popStateListener)}didMount(){this.state.routes=this._updateRoutes(!1),this.state.active=this._updateActive(!1)}didUnMount(){window.removeEventListener("popstate",this.popStateListener)}_updateRoutes(t=!0){const e=[],s=this.querySelectorAll("*");for(let t=0;t<s.length;t++){const n=s[t];console.log(n.tagName),n.isActive&&n.setState&&n instanceof i&&e.push(n)}return console.dir(e),console.dir(this.props),t&&this.setState({routes:e}),e}_updateActive(t=!0){let e;for(const t of this.state.routes)t.isActive(e||this.state.active)&&(e=t);return e!==this.state.active&&(this.state.active&&this.state.active.setState({active:!1}),e&&e.setState({active:!0}),t&&this.setState({active:e})),e}}e.Router=r;class i extends n.Component{constructor(){super(),console.log("route ctor "),console.dir(this.props)}isActive(t,e=!0){const s=o+this.props["data-path"];let n=location.pathname;n.length>1&&"/"!==n.charAt(n.length-1)&&(n+="/");let r=e?n===s||""===this.props["data-default"]:n===s;return t&&this!==t&&r&&t.isActive(t,!1)&&(r=!1),console.log("%s %s on %s isActive %s",this.props["data-path"],this.props["data-element"],n,r),r}render(){return this.state.active?`<${this.props["data-element"]}></${this.props["data-element"]}>`:""}}e.Route=i;class a extends n.Component{constructor(){super(),this.clickListener=t=>{t.preventDefault(),c(this.props["data-path"])}}willMount(){this.addEventListener("click",this.clickListener)}didUnMount(){this.removeEventListener("click",this.clickListener)}}function c(t){window.history.pushState(null,null,o+t),window.dispatchEvent(new PopStateEvent("popstate"))}e.RouteLink=a,e.historyPushPath=c},275:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenShadowRootComponent=e.ShadowRootComponent=void 0;const n=s(481),o=s(455),r=new WeakMap;class i extends o.Component{constructor(){super();const t=this.attachShadow({mode:"closed"});r.set(this,t)}_renderOnElement(){const t=r.get(this);return(0,n.renderOnElement)(this,t)}}e.ShadowRootComponent=i,e.OpenShadowRootComponent=class extends i{constructor(){super();const t=this.attachShadow({mode:"open"});r.set(this,t)}}}},e={};function s(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,s),r.exports}(()=>{const{Component:t,Router:e,Route:n,RouteLink:o,historyPushPath:r}=s(846);window.onload=()=>{customElements.define("my-404",class extends t{render(){return'<p>not found</p><route-link data-path="/"><a href="#">home link</a></route-link>'}}),customElements.define("my-home",class extends t{render(){return"home"}}),customElements.define("path-route",n),customElements.define("route-link",o),customElements.define("path-router",e)}})()})();