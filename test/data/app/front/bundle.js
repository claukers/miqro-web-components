(()=>{var t={481:(t,e)=>{"use strict";function n(t,e,n){if(!t||"object"!=typeof t)return void 0!==n?n:void 0;if("string"!=typeof e)throw new Error("attrPath must be typeof string");const s=e.split(".").reverse();let o=t;for(;s.length>0;){const t=s.pop();if(void 0===o[t])return void 0!==n?n:void 0;o=o[t]}return o}function s(t,e){const s=t.getAttributeNames(),o={};for(const r of s){const s=t.getAttribute(r);if(e&&s&&"{"===s.charAt(0)&&"}"===s.charAt(s.length-1)){const t=n(e,s.substring(1,s.length-1));if("function"==typeof t){const n=t;o[r]=n.bind(e)}else void 0!==t&&(o[r]=t)}else null!=s&&(o[r]=s)}return o}function o(t,e){const n=Object.keys(e);for(const s of n){const n=e[s];if("function"==typeof n)if("data-ref"===s)n(t);else if(0===s.indexOf("data-on-")){const e=s.substring("data-on-".length);t.addEventListener(e,n)}else console.error("Cannot use attribute [%s] with function as value. Only data-on-... and data-ref are allowed. Use custom events for using data-on... with custom events or use the helpers .emit and .registerEvent to use custom events.",s)}}function r(t){const e=[];for(let n=t.length-1;n>=0;n--)e.unshift(["&#",t[n].charCodeAt(0),";"].join(""));return e.join("")}Object.defineProperty(e,"__esModule",{value:!0}),e.renderOnElement=e.encodeHTML=e.decodeHTML=e.renderElementProps=void 0,e.renderElementProps=s,e.decodeHTML=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(e)}))},e.encodeHTML=r,e.renderOnElement=function(t,e){if(t.render){const a=t.render();if("string"==typeof a){const d=(i=t,a.replace(/{[^}]*}/g,(t=>{const e=t.substring(1,t.length-1),s=n(i,e);return"function"==typeof s?t:"string"==typeof s||"boolean"==typeof s||"number"==typeof s?r(String(s)):null==s?"":t})));if(void 0!==d){e.innerHTML=d;const n=e.querySelectorAll("*");for(let e=0;e<n.length;e++){const r=n[e],i=s(r,t),a=r,d=Object.keys(i).filter((t=>i[t]&&"object"==typeof i[t]));if(a.setProps&&d.length>0){const t={};for(const e of d)t[e]=i[e];a.setProps(t)}o(r,i)}t.afterRender&&t.afterRender()}}}var i}},455:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;const s=n(481),o=n(530);class r extends HTMLElement{constructor(){super(),this._emitter=new o.EventEmitter,this._observer=new MutationObserver((t=>{const e={};for(const n of t)if("attributes"===n.type){const t=n.attributeName,s=this.getAttribute(t);e[t]=s}this.setProps(e)})),this.props=(0,s.renderElementProps)(this),this.state={}}connectedCallback(){this._observer.observe(this,{attributes:!0}),this.setProps((0,s.renderElementProps)(this),!1,!1),this.willMount(),this._renderOnElement(),this.didMount()}disconnectedCallback(){this._observer.disconnect(),this.didUnMount()}render(){}willMount(){}didMount(){}didUnMount(){}afterRender(){}emit(t){return this._emitter.emit(t,this)}registerEvent(t,e){return this._emitter.registerEvent(t,e)}setState(t,e=!1,n=!0){const s=this.state;if(this.state=e?t:{...this.state,...t},n&&this.isConnected&&this.didUpdate(this.props,s))return this._renderOnElement()}setProps(t,e=!1,n=!0){const s=this.props;if(this.props=e?t:{...this.props,...t},n&&this.isConnected&&this.didUpdate(s,this.state))return this._renderOnElement()}didUpdate(t,e){return!0}_renderOnElement(){return(0,s.renderOnElement)(this,this)}}e.Component=r},530:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0,e.EventEmitter=class{constructor(t){this.defaultOptions=t,this._events=new Map}emit(t,e){this._events.has(t)||this.registerEvent(t),e.dispatchEvent(this._events.get(t))}registerEvent(t,e){this._events.set(t,new Event(t,e||this.defaultOptions))}}},846:function(t,e,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(t,e,n,s){void 0===s&&(s=n),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,s){void 0===s&&(s=n),t[s]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||s(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.renderOnElement=e.decodeHTML=e.encodeHTML=void 0;var r=n(481);Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return r.encodeHTML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return r.decodeHTML}}),Object.defineProperty(e,"renderOnElement",{enumerable:!0,get:function(){return r.renderOnElement}}),o(n(455),e),o(n(275),e),o(n(683),e)},683:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.historyPushPath=e.RouteLink=e.Route=e.Router=void 0;const s=n(455),o=document.documentElement.getAttribute("data-router-base-path")?document.documentElement.getAttribute("data-router-base-path"):"";class r extends s.Component{constructor(){if(super(),this.popStateListener=()=>{this._updateActive()},this.props["data-default-element"]){const t=new i;t.setAttribute("data-element",this.props["data-default-element"]),t.setAttribute("data-default",""),this.appendChild(t)}}willMount(){window.addEventListener("popstate",this.popStateListener)}didMount(){this.state.routes=this._updateRoutes(!1),this.state.active=this._updateActive(!1)}didUnMount(){window.removeEventListener("popstate",this.popStateListener)}_updateRoutes(t=!0){const e=[],n=this.querySelectorAll("*");for(let t=0;t<n.length;t++){const s=n[t];s.isActive&&s.setState&&s instanceof i&&e.push(s)}return t&&this.setState({routes:e}),e}_updateActive(t=!0){let e;for(const t of this.state.routes)t.isActive(e||this.state.active)&&(e=t);return e!==this.state.active&&(this.state.active&&this.state.active.setState({active:!1}),e&&e.setState({active:!0}),t&&this.setState({active:e})),e}}e.Router=r;class i extends s.Component{constructor(){super()}isActive(t,e=!0){const n=o+this.props["data-path"];let s=location.pathname;s.length>1&&"/"!==s.charAt(s.length-1)&&(s+="/");let r=e?s===n||""===this.props["data-default"]:s===n;return t&&this!==t&&r&&t.isActive(t,!1)&&(r=!1),r}render(){return this.state.active?`<${this.props["data-element"]}></${this.props["data-element"]}>`:""}}e.Route=i;class a extends s.Component{constructor(){super(),this.clickListener=t=>{t.preventDefault(),d(this.props["data-path"])}}willMount(){this.addEventListener("click",this.clickListener)}didUnMount(){this.removeEventListener("click",this.clickListener)}}function d(t){window.history.pushState(null,null,o+t),window.dispatchEvent(new PopStateEvent("popstate"))}e.RouteLink=a,e.historyPushPath=d},275:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenShadowRootComponent=e.ShadowRootComponent=void 0;const s=n(481),o=n(455),r=new WeakMap;class i extends o.Component{constructor(){super();const t=this.attachShadow({mode:"closed"});r.set(this,t)}_renderOnElement(){const t=r.get(this);return(0,s.renderOnElement)(this,t)}}e.ShadowRootComponent=i,e.OpenShadowRootComponent=class extends i{constructor(){super();const t=this.attachShadow({mode:"open"});r.set(this,t)}}}},e={};function n(s){var o=e[s];if(void 0!==o)return o.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,n),r.exports}(()=>{const{Component:t,Router:e,Route:s,RouteLink:o,historyPushPath:r}=n(846);window.onload=()=>{customElements.define("my-404",class extends t{render(){return'<p>not found</p><route-link data-path="/"><a href="#">home link</a></route-link>'}}),customElements.define("my-home",class extends t{render(){return"home"}}),customElements.define("path-route",s),customElements.define("route-link",o),customElements.define("path-router",e)}})()})();